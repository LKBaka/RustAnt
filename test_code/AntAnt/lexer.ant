use token;

class Lexer {
	let code = None;
	let cur_char = None;

	let pos = 0;
	let next_pos = 0;

	#[method]
	func create(self, code) {
		let l = copy(self);

		l.code = code;

		l
	}

	#[method]
	let read_char = func (self) {
		if self.next_pos < len(self.code) {
            self.cur_char = self.code[self.next_pos];
        } else {
            self.cur_char = ""; 
        }

        self.pos = self.next_pos;
        self.next_pos = self.next_pos + 1;
	
		self.cur_char
	}

	#[method]
	let next_token = func (self) {
		let tok = token.Token.create(token.TOK_UNINIT, self.cur_char)

		if tok.value == "\0" {
			tok.ty = token.TOK_EOF
		}

		self.read_char()

		tok
	}
}